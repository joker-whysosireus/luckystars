<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gifts Blocks</title>
    
    <link rel="stylesheet" href="index.css">
    
    <!-- Подключение Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- Подключение GigaPub (один раз) -->
    <script data-project-id="3186">
      !function(){
        var s=document.currentScript,p=s.getAttribute('data-project-id')||'default';
        var d=['https://ad.gigapub.tech','https://ru-ad.gigapub.tech'],i=0,t,sc;
        function l(){
          sc=document.createElement('script');
          sc.async=true;
          sc.src=d[i]+'/script?id='+p;
          clearTimeout(t);
          t=setTimeout(function(){
            sc.onload=sc.onerror=null;
            sc.src='';
            if(++i<d.length)l();
          },15000);
          sc.onload=function(){clearTimeout(t)};
          sc.onerror=function(){clearTimeout(t);if(++i<d.length)l()};
          document.head.appendChild(sc);
        }
        l();
      }();
    </script>
    
    <!-- Подключение Adexium (один раз) -->
    <script type="text/javascript" src="https://cdn.tgads.space/assets/js/adexium-widget.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- Инициализация Adexium после загрузки DOM -->
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            // Проверяем доступность AdexiumWidget
            if (typeof AdexiumWidget !== 'undefined') {
                const adexiumAds = new AdexiumWidget({
                    wid: 'e279c53e-42c1-42b9-93be-a535d900a92e',
                    adFormat: 'push-like',
                    firstAdImpressionIntervalInSeconds: 30,
                    adImpressionIntervalInSeconds: 30,
                    debug: false,
                    isFullScreen: true
                });
                
                // Подписываемся на события для отладки
                adexiumAds.on('adReceived', function(ad) {
                    console.log('Ad received:', ad);
                });
                
                adexiumAds.on('noAdFound', function() {
                    console.log('No ad available');
                });
                
                adexiumAds.on('adDisplayed', function() {
                    console.log('Ad displayed successfully');
                });
                
                adexiumAds.autoMode();
            } else {
                console.error('AdexiumWidget not loaded');
            }
        });
    </script>
</body>
</html>